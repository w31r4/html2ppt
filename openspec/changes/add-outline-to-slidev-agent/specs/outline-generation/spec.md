## ADDED Requirements

### Requirement: 需求输入处理
系统 SHALL 接收用户的自然语言需求描述，并对其进行预处理和验证。

#### Scenario: 接收有效需求描述
- **WHEN** 用户提交一段描述演示文稿需求的文本
- **THEN** 系统应保存该需求并触发大纲生成流程

#### Scenario: 拒绝空白输入
- **WHEN** 用户提交空白或仅包含空格的文本
- **THEN** 系统应返回错误提示，要求用户输入有效内容

#### Scenario: 处理超长输入
- **WHEN** 用户提交超过10000字符的需求描述
- **THEN** 系统应截断并提示用户精简需求

### Requirement: 大纲模板生成
系统 SHALL 将用户需求转换为结构化的Markdown大纲模板。

#### Scenario: 生成标准大纲结构
- **WHEN** 系统处理有效的需求描述
- **THEN** 应生成包含标题、章节、要点的Markdown大纲
- **AND** 大纲应遵循预定义的模板格式

#### Scenario: 大纲层级限制
- **WHEN** 生成大纲时
- **THEN** 大纲层级不应超过3级
- **AND** 每个章节应包含1-5个要点

### Requirement: 大纲模板格式规范
系统生成的大纲 SHALL 遵循以下Markdown格式规范。

#### Scenario: 模板格式验证
- **WHEN** 大纲生成完成
- **THEN** 大纲应包含以下结构：
  - 一级标题：演示文稿主题
  - 二级标题：各个章节
  - 列表项：具体要点
  - 可选：speaker notes 块

### Requirement: 大纲迭代修改
系统 SHALL 支持用户对生成的大纲进行修改，并基于修改后的大纲重新生成。

#### Scenario: 用户编辑大纲
- **WHEN** 用户在编辑器中修改大纲内容
- **THEN** 系统应实时保存修改
- **AND** 保留修改历史

#### Scenario: 需求增补触发重新生成
- **WHEN** 用户添加新的需求描述并请求重新生成
- **THEN** 系统应基于原始需求+增补内容生成新大纲
- **AND** 用户可以选择保留或替换当前大纲

### Requirement: 大纲确认机制
系统 SHALL 提供明确的大纲确认机制，作为进入下一阶段的门控。

#### Scenario: 确认大纲进入生成阶段
- **WHEN** 用户点击确认按钮
- **THEN** 系统应锁定当前大纲
- **AND** 触发React组件生成流程

#### Scenario: 取消确认返回编辑
- **WHEN** 用户在确认后但生成开始前选择返回
- **THEN** 系统应解锁大纲
- **AND** 允许用户继续编辑